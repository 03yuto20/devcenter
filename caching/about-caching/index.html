<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>About caching - Bitrise DevCenter</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Bitrise DevCenter">
    <meta property="og:image" content="None/../../img/logo.svg">
    <meta name="apple-mobile-web-app-title" content="Bitrise DevCenter">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../img/logo.svg">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700|Source+Code+Pro">
      <style>
        body, input {
          font-family: 'Roboto', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-deep-purple palette-accent-deep-purple">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Caching <i class="icon icon-link"></i>
              
            
          </span>
        
        About caching
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/bitrise-io/devcenter" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../img/logo.svg">
        </div>
      
      <div class="name">
        <strong>
          Bitrise DevCenter
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          bitrise-io/devcenter
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/bitrise-io/devcenter/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/bitrise-io/devcenter/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Bitrise DevCenter" href="../..">
      Bitrise DevCenter
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Getting Started</span>
    <ul>
      
        
  <li>
    <a class="" title="What is Bitrise?" href="../../getting-started/">
      What is Bitrise?
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Builds & Workflows" href="../../getting-started/builds-and-workflows/">
      Builds & Workflows
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Code Security" href="../../getting-started/code-security/">
      Code Security
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Infrastructure</span>
    <ul>
      
        
  <li>
    <a class="" title="Virtual Machines" href="../../infrastructure/virtual-machines/">
      Virtual Machines
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Available Stacks" href="../../infrastructure/available-stacks/">
      Available Stacks
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Signing up</span>
    <ul>
      
        
  <li>
    <a class="" title="Signing up with GitHub" href="../../signing-up/signing-up-with-github/">
      Signing up with GitHub
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with Bitbucket" href="../../signing-up/signing-up-with-bitbucket/">
      Signing up with Bitbucket
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with email" href="../../signing-up/signing-up-with-email/">
      Signing up with email
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Trial after signing up" href="../../signing-up/trial-after-signing-up/">
      Trial after signing up
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Adding a new app</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new app" href="../../adding-a-new-app/">
      Adding a new app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Connecting a repository" href="../../adding-a-new-app/connecting-a-repository/">
      Connecting a repository
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up SSH keys" href="../../adding-a-new-app/setting-up-ssh-keys/">
      Setting up SSH keys
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up configuration" href="../../adding-a-new-app/setting-up-configuration/">
      Setting up configuration
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tutorials</span>
    <ul>
      
        
  <li>
    <a class="" title="Community Created" href="../../tutorials/community-created/">
      Community Created
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Create signed APK on bitrise.io" href="../../tutorials/create-signed-apk-on-bitrise/">
      Create signed APK on bitrise.io
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Configure and connect to your VPN" href="../../tutorials/vpn-configuration/">
      Configure and connect to your VPN
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Team management</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new team member" href="../../team-management/">
      Adding a new team member
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Changing the owner of an app" href="../../team-management/changing-the-owner-of-an-app/">
      Changing the owner of an app
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Webhooks</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding webhooks" href="../../webhooks/">
      Adding webhooks
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Adding a GitHub webhook" href="../../webhooks/adding-a-github-webhook/">
      Adding a GitHub webhook
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Caching</span>
    <ul>
      
        
  <li>
    <a class="current" title="About caching" href="./">
      About caching
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="Setup" href="#setup">
                Setup
              </a>
            </li>
          
            <li class="anchor">
              <a title="Downloading and deleting caches" href="#downloading-and-deleting-caches">
                Downloading and deleting caches
              </a>
            </li>
          
            <li class="anchor">
              <a title="Technical notes" href="#technical-notes">
                Technical notes
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Caching Cocoapods" href="../caching-cocoapods/">
      Caching Cocoapods
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Gradle" href="../caching-gradle/">
      Caching Gradle
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Ruby GEMs" href="../caching-ruby-gems/">
      Caching Ruby GEMs
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">iOS</span>
    <ul>
      
        
  <li>
    <a class="" title="Code Signing" href="../../ios/code-signing/">
      Code Signing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Uploading certificates" href="../../ios/uploading-certificates/">
      Uploading certificates
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Resigning an IPA" href="../../ios/resigning-an-ipa/">
      Resigning an IPA
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Frequent iOS issues" href="../../ios/frequent-ios-issues/">
      Frequent iOS issues
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="List of known Xcode issues" href="../../ios/known-xcode-issues/">
      List of known Xcode issues
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Docker</span>
    <ul>
      
        
  <li>
    <a class="" title="How to run your build locally in Docker" href="../../docker/run-your-build-locally-in-docker/">
      How to run your build locally in Docker
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tips & Tricks</span>
    <ul>
      
        
  <li>
    <a class="" title="Attach any file as an Artifact to the Build" href="../../tips-and-tricks/attach-any-file-to-build/">
      Attach any file as an Artifact to the Build
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Expose an Environment Variable and use it in another Step" href="../../tips-and-tricks/expose-environment-variable/">
      Expose an Environment Variable and use it in another Step
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Don't mark the Build as failed if a given step would fail (ignore the error of the Step)" href="../../tips-and-tricks/dont-mark-build-failed-if-step-fails/">
      Don't mark the Build as failed if a given step would fail (ignore the error of the Step)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Enable/Disable a step (optionally, based on a condition)" href="../../tips-and-tricks/disable-a-step-by-condition/">
      Enable/Disable a step (optionally, based on a condition)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Xcode Archive: export options" href="../../tips-and-tricks/xcodebuild-export-options/">
      Xcode Archive: export options
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Install Any Additional Tool" href="../../tips-and-tricks/install-additional-tools/">
      Install Any Additional Tool
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to configure fastlane match for Bitrise" href="../../tips-and-tricks/how-to-configure-fastlane-match-for-bitrise/">
      How to configure fastlane match for Bitrise
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Frequently Asked Questions (FAQ)</span>
    <ul>
      
        
  <li>
    <a class="" title="Android x86 Emulator" href="../../faq/android-x86-emulator/">
      Android x86 Emulator
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to generate an SSH key pair" href="../../faq/how-to-generate-ssh-keypair/">
      How to generate an SSH key pair
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>About caching</h1>
          
          <p>The caching will tar all the cached directories and dependencies and store them securely in Amazon S3.
Note that if you store files which are downloaded from a CDN / cloud storage you might not see any improvement,
as downloading it from the Bitrise Build Cache storage will probably take about the same time as downloading
it from its canonical CDN / cloud storage location.
However Bitrise Caching still might help if you have reliability issues with the resource's, or dependency's canonical download location.</p>
<div class="admonition note">
<p class="admonition-title">Cache Expiring</p>
<p>The Build Cache related to a <strong><em>specific branch</em></strong> expires / is auto-deleted after 7 days,
<strong>if there's no new build on that branch in the meantime</strong>.</p>
<p>This means that <strong>if you do builds on a specific branch every day</strong> (more frequently than a week),
<strong>it'll never expire / will never be deleted automatically</strong>,
but if you don't start a build on that specific branch for more than 7 days then the related cache
will be removed, and your next build will run like the first time, when there was no cache for that branch yet.</p>
</div>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">⚓</a></h2>
<p>All you need to get started is adding two Steps to your Workflow:</p>
<ul>
<li>One for downloading the previous cache (if any): <code>Cache:Pull</code></li>
<li>One for checking the state of the cache and uploading it if required: <code>Cache:Push</code></li>
</ul>
<p>You should add the <code>Cache:Pull</code> (download) step right before you'd use the cache.
For example, in case of an iOS app, this can be between the <code>Git Clone</code> and the <code>CocoaPods</code> install steps.
If you intend to cache your <code>./Pods</code> directory you should not pull the cache before the <code>Git Clone</code>,
because <code>Git Clone</code> will create the base directory for <code>./Pods</code>.
Before the <code>Git Clone</code> step your code (and the directories your code creates when git cloned) is not available on the Virtual Machine.</p>
<p>The <code>Cache:Push</code> step can be the very last step in the Workflow.
The only thing you have to care about is that it should be after the step(s) which update the cached paths.
For example in case of <code>CocoaPods</code> you should put the <code>Cache:Push</code> step anywhere after the <code>CocoaPods</code> install,
because that's the step which generates, or updates the directory (<code>./Pods</code>) which is cached.</p>
<h2 id="downloading-and-deleting-caches">Downloading and deleting caches<a class="headerlink" href="#downloading-and-deleting-caches" title="Permanent link">⚓</a></h2>
<p>You can download and delete caches, for every branch which generated a cache,
on the <code>Settings</code> tab of the app, under the <code>Manage Build Caches</code> section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can see the size of the caches and the last time a given cache was used in the popup.</p>
</div>
<h2 id="technical-notes">Technical notes<a class="headerlink" href="#technical-notes" title="Permanent link">⚓</a></h2>
<p>The Build Cache feature is split into two parts, the <code>Build Cache API</code> and the <code>Steps</code>.</p>
<p>The <code>Build Cache API</code> is actually a really simple API, with only one responsibility:
you can request a download or an upload URL from the API.
Of course it also makes sure that you have the required access rights to the resource (Build Cache Archive),
but other than that its only responsibility is providing the secure - time limited and expiring - download and upload URLs.
It does not process the files.</p>
<p>The <code>Steps</code> are the place where the "magic" happens.
The whole logic of comparing caches to see if there was any relevant change and creating the cache archives is done by the Steps.
This also means that you can write your own Steps and implement your own comparison and compression logic.
The step just has to use the Build Cache API to get download and upload URLs, there's no restriction on the cache file format or on its content.</p>
<div class="admonition idea">
<p class="admonition-title">Advanced notes</p>
<ul>
<li>You can create your own Cache steps</li>
<li>You can create and use your own Build Cache server and API</li>
</ul>
</div>
<h3 id="the-cache-might-or-might-not-be-available">The cache might or might not be available<a class="headerlink" href="#the-cache-might-or-might-not-be-available" title="Permanent link">⚓</a></h3>
<p>You should write your code in a way that it won't fail if the cache can't be accessed.</p>
<h3 id="the-cache-is-downloaded-over-the-internet">The cache is downloaded over the internet<a class="headerlink" href="#the-cache-is-downloaded-over-the-internet" title="Permanent link">⚓</a></h3>
<p>Which means that if you store files which are downloaded from a CDN / cloud storage you might not see
any speed improvement,
as downloading it from the Bitrise Build Cache storage will probably take about the same time as
downloading it from it's canonical CDN / cloud storage location.</p>
<p>One important note: storing a dependency in Bitrise Build Cache might help if you have <strong>reliability</strong>
issues with the resource's / dependency's canonical download location.
Popular tools / dependencies might get rate limited (<a href="https://github.com/Medium/phantomjs/issues/501">example: PhantomJS</a>).
If that's the case, storing the dependency in Bitrise Build Cache might help.
It might not improve the build time but <strong>it definitely can improve the reliability</strong>.</p>
<h3 id="the-cache-is-stored-as-one-archive-file">The cache is stored as one archive file<a class="headerlink" href="#the-cache-is-stored-as-one-archive-file" title="Permanent link">⚓</a></h3>
<p>So if you have multiple paths you want to cache and any
of the paths gets updated <strong>it'll update the whole cache archive</strong>,
including all the paths you cache.</p>
<h3 id="if-a-build-runs-on-a-new-branch-the-first-time-itll-get-the-maindefault-branchs-cache">If a build runs on a new branch the first time it'll get the main/default Branch's cache.<a class="headerlink" href="#if-a-build-runs-on-a-new-branch-the-first-time-itll-get-the-maindefault-branchs-cache" title="Permanent link">⚓</a></h3>
<p>The first build on a non primary/default branch, to speed up things,
can access (read-only) the primary branch's cache.</p>
<p><strong>If it pushes back to the cache that won't modify the main/default Branch's cache</strong>,
that will be stored for the new branch directly,
and the next time a build runs on this branch it'll use that cache.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../../webhooks/adding-a-github-webhook/" title="Adding a GitHub webhook">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Adding a GitHub webhook
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../caching-cocoapods/" title="Caching Cocoapods">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Caching Cocoapods
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'bitrise-io/devcenter';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>