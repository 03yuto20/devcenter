<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>

    <!-- Charset and viewport -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,
      user-scalable=no, initial-scale=1, maximum-scale=1" />

    <!-- General meta tags -->
    

      <!-- Site title -->
      
        <title>Use your own Docker image - Bitrise DevCenter</title>
      

      <!-- Site description -->
      

      <!-- Canonical -->
      

      <!-- Author -->
      
    

    <!-- Open graph tags -->
    <meta property="og:url" content="None" />
    <meta property="og:title" content="Bitrise DevCenter"/>
    <meta property="og:image"
      content="None/../../img/logo.svg" />

    <!-- Web application capability on iOS -->
    <meta name="apple-mobile-web-app-title" content="Bitrise DevCenter" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style"
      content="black-translucent" />

    <!-- Web application icon on iOS -->
    
      <link rel="apple-touch-icon"
        href="../../img/logo.svg">
    

    <!-- Favicon -->
    
    <link rel="shortcut icon" type="image/x-icon"
      href="../../assets/images/favicon.ico" />
    <link rel="icon" type="image/x-icon"
      href="../../assets/images/favicon.ico" />

    <!-- Configure icons (placed here to omit issues with subdirectories) -->
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>

    <!-- Theme-related stylesheets -->
    <link rel="stylesheet" type="text/css"
      href="../../assets/stylesheets/application.css" />

    <!-- Extra palettes -->
    
      <link rel="stylesheet" type="text/css"
        href="../../assets/stylesheets/palettes.css" />
    

    <!-- Configure webfonts -->
    
      
      
      
      <link rel="stylesheet" type="text/css"
        href="https://fonts.googleapis.com/css?family=Roboto:400,700|Source+Code+Pro" />
      <style>
        body, input {
          font-family: 'Roboto', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
        }
      </style>
    

    <!-- Custom stylesheets -->
    
      <link rel="stylesheet" type="text/css" href="../../stylesheets/extra.css" />
    

    <!-- Modernizr -->
    <script src="../../assets/javascripts/modernizr.js"></script>

    <!-- Custom header -->
    
  </head>

  <!-- Define palette -->
  
  
  
  <body class="
    palette-primary-deep-purple
    palette-accent-deep-purple
  ">

    <!--
      Sadly the jinja template engine is not very flexible - it doesn't support
      regular expressions out-of-the-box. Since there might be a slash at the
      end of the repository name, we just do a string comparison and kill it.
    -->
    
      
      
    

    <!-- Backdrop -->
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>

    <!-- State toggles -->
    <input class="toggle" type="checkbox" id="toggle-drawer" />
    <input class="toggle" type="checkbox" id="toggle-search" />

    <!-- Overlay for expanded drawer -->
    <label class="toggle-button overlay" for="toggle-drawer"></label>

    <!-- Header -->
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Docker <i class="icon icon-link"></i>
              
            
          </span>
        
        Use your own Docker image
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>

    <!-- Main content -->
    <main class="main">

      <!--
        This is a nasty hack that checks whether the content contains a
        h1 headline. If it does, the variable h1 is set to true. This is
        necessary for correctly rendering the table of contents which is
        embedded into the navigation and the actual headline.
      -->
      

      <!-- Drawer with navigation -->
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/bitrise-io/devcenter" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../img/logo.svg">
        </div>
      
      <div class="name">
        <strong>
          Bitrise DevCenter
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          bitrise-io/devcenter
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/bitrise-io/devcenter/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/bitrise-io/devcenter/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Bitrise DevCenter - What is Bitrise?" href="../..">
      Bitrise DevCenter - What is Bitrise?
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Getting Started</span>
    <ul>
      
        
  <li>
    <a class="" title="Builds & Workflows" href="../../getting-started/builds-and-workflows/">
      Builds & Workflows
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Code Security" href="../../getting-started/code-security/">
      Code Security
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Create your first App on Bitrise.io" href="../../getting-started/create-your-first-app-on-bitrise/">
      Create your first App on Bitrise.io
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Add your first Step to your Workflow" href="../../getting-started/add-your-first-step-to-your-workflow/">
      Add your first Step to your Workflow
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Manage your Bitrise workflow" href="../../getting-started/manage-your-bitrise-workflow/">
      Manage your Bitrise workflow
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Infrastructure</span>
    <ul>
      
        
  <li>
    <a class="" title="Available Stacks" href="../../infrastructure/available-stacks/">
      Available Stacks
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Virtual Machines" href="../../infrastructure/virtual-machines/">
      Virtual Machines
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Signing up</span>
    <ul>
      
        
  <li>
    <a class="" title="Signing up with GitHub" href="../../signing-up/signing-up-with-github/">
      Signing up with GitHub
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with Bitbucket" href="../../signing-up/signing-up-with-bitbucket/">
      Signing up with Bitbucket
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with email" href="../../signing-up/signing-up-with-email/">
      Signing up with email
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Trial after signing up" href="../../signing-up/trial-after-signing-up/">
      Trial after signing up
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Adding a new app</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new app" href="../../adding-a-new-app/">
      Adding a new app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Connecting a repository" href="../../adding-a-new-app/connecting-a-repository/">
      Connecting a repository
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up SSH keys" href="../../adding-a-new-app/setting-up-ssh-keys/">
      Setting up SSH keys
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up configuration" href="../../adding-a-new-app/setting-up-configuration/">
      Setting up configuration
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Team management</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new team member" href="../../team-management/">
      Adding a new team member
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Changing the owner of an app" href="../../team-management/changing-the-owner-of-an-app/">
      Changing the owner of an app
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Webhooks</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding webhooks" href="../../webhooks/">
      Adding webhooks
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Adding a GitHub webhook" href="../../webhooks/adding-a-github-webhook/">
      Adding a GitHub webhook
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Adding a Bitbucket webhook" href="../../webhooks/adding-a-bitbucket-webhook/">
      Adding a Bitbucket webhook
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Control what to build when, with the Trigger Map" href="../../webhooks/trigger-map/">
      Control what to build when, with the Trigger Map
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Caching</span>
    <ul>
      
        
  <li>
    <a class="" title="About caching" href="../../caching/about-caching/">
      About caching
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Cocoapods" href="../../caching/caching-cocoapods/">
      Caching Cocoapods
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Gradle" href="../../caching/caching-gradle/">
      Caching Gradle
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Maven" href="../../caching/caching-maven/">
      Caching Maven
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Ruby GEMs" href="../../caching/caching-ruby-gems/">
      Caching Ruby GEMs
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">iOS</span>
    <ul>
      
        
  <li>
    <a class="" title="iOS Code Signing" href="../../ios/code-signing/">
      iOS Code Signing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="iOS Code Signing - Technical details" href="../../ios/code-signing-technical-details/">
      iOS Code Signing - Technical details
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Uploading certificates" href="../../ios/uploading-certificates/">
      Uploading certificates
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to export Certificates and Provisioning Profiles" href="../../ios/export-certificate-and-provisioning-profile/">
      How to export Certificates and Provisioning Profiles
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Resigning an IPA" href="../../ios/resigning-an-ipa/">
      Resigning an IPA
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Frequent iOS issues" href="../../ios/frequent-ios-issues/">
      Frequent iOS issues
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="List of known Xcode issues" href="../../ios/known-xcode-issues/">
      List of known Xcode issues
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Android</span>
    <ul>
      
        
  <li>
    <a class="" title="Android Code Signing" href="../../android/code-signing/">
      Android Code Signing
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="The Android/Linux/Docker environment" href="../../android/the-environment/">
      The Android/Linux/Docker environment
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Android tips and tricks" href="../../android/android-tips-and-tricks/">
      Android tips and tricks
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Frequent Android issues" href="../../android/frequent-android-issues/">
      Frequent Android issues
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Docker</span>
    <ul>
      
        
  <li>
    <a class="" title="Docker support on bitrise.io" href="../">
      Docker support on bitrise.io
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to run your build locally in Docker" href="../run-your-build-locally-in-docker/">
      How to run your build locally in Docker
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Use your own Docker image" href="./">
      Use your own Docker image
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="Run docker commands during the build" href="#run-docker-commands-during-the-build">
                Run docker commands during the build
              </a>
            </li>
          
            <li class="anchor">
              <a title="Using bitrise.io custom docker image option" href="#using-bitriseio-custom-docker-image-option">
                Using bitrise.io custom docker image option
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Xamarin</span>
    <ul>
      
        
  <li>
    <a class="" title="About Xamarin" href="../../xamarin/">
      About Xamarin
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Connect your Xamarin account to Bitrise" href="../../xamarin/connect-your-xamarin-account-to-bitrise/">
      Connect your Xamarin account to Bitrise
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Restore NuGet packages and Xamarin Components" href="../../xamarin/restore-nuget-packages-and-xamarin-components/">
      Restore NuGet packages and Xamarin Components
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Deploy your Xamarin app" href="../../xamarin/deploy-your-xamarin-app/">
      Deploy your Xamarin app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Add UITest to your Xamarin app" href="../../xamarin/add-unit-test-to-your-xamarin-app/">
      Add UITest to your Xamarin app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Run your tests in the Xamarin Test Cloud" href="../../xamarin/run-your-tests-in-the-xamarin-test-cloud/">
      Run your tests in the Xamarin Test Cloud
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Add custom sources to NuGet" href="../../xamarin/add-custom-sources-to-nuget/">
      Add custom sources to NuGet
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Fastlane</span>
    <ul>
      
        
  <li>
    <a class="" title="fastlane tools integration" href="../../fastlane/fastlane-tools-integration/">
      fastlane tools integration
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to configure fastlane match for Bitrise" href="../../fastlane/how-to-configure-fastlane-match-for-bitrise/">
      How to configure fastlane match for Bitrise
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tutorials</span>
    <ul>
      
        
  <li>
    <a class="" title="Community Created Tutorials" href="../../tutorials/community-created/">
      Community Created Tutorials
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="HipChat message with build status and details" href="../../tutorials/hipchat-message/">
      HipChat message with build status and details
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to use the Generic File Storage" href="../../tutorials/how-to-use-the-generic-file-storage/">
      How to use the Generic File Storage
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Download or replace project resources" href="../../tutorials/download-or-replace-project-resources/">
      Download or replace project resources
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Efficient Continuous Integration and Deployment Workflow for iOS development" href="../../tutorials/efficient-continuous-integration-and-deployment-workflow-for-ios/">
      Efficient Continuous Integration and Deployment Workflow for iOS development
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Configure and connect to your VPN" href="../../tutorials/vpn-configuration/">
      Configure and connect to your VPN
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Auto deploy your Middleman blog / static website" href="../../tutorials/auto-deploy-middleman-project/">
      Auto deploy your Middleman blog / static website
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Build with FAKE (F# Make)" href="../../tutorials/build-with-fake/">
      Build with FAKE (F# Make)
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Deployment Tutorials</span>
    <ul>
      
        
  <li>
    <a class="" title="Bitrise OTA App Deployment" href="../../tutorials/deploy/bitrise-app-deployment/">
      Bitrise OTA App Deployment
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Publish your app to Appaloosa" href="../../tutorials/deploy/publish-your-app-to-appaloosa/">
      Publish your app to Appaloosa
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Deploy to TestFairy with Bitrise" href="../../tutorials/deploy/deploy-to-testfairy-with-bitrise/">
      Deploy to TestFairy with Bitrise
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tips & Tricks</span>
    <ul>
      
        
  <li>
    <a class="" title="Skip a Build (skip ci)" href="../../tips-and-tricks/skip-a-build/">
      Skip a Build (skip ci)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Attach any file as an Artifact to the Build" href="../../tips-and-tricks/attach-any-file-to-build/">
      Attach any file as an Artifact to the Build
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Expose an Environment Variable and use it in another Step" href="../../tips-and-tricks/expose-environment-variable/">
      Expose an Environment Variable and use it in another Step
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Don't mark the Build as failed if a given step would fail (ignore the error of the Step)" href="../../tips-and-tricks/dont-mark-build-failed-if-step-fails/">
      Don't mark the Build as failed if a given step would fail (ignore the error of the Step)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Enable/Disable a step (optionally, based on a condition)" href="../../tips-and-tricks/disable-a-step-by-condition/">
      Enable/Disable a step (optionally, based on a condition)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Xcode Archive: export options" href="../../tips-and-tricks/xcodebuild-export-options/">
      Xcode Archive: export options
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Install Any Additional Tool" href="../../tips-and-tricks/install-additional-tools/">
      Install Any Additional Tool
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Optimize your build times" href="../../tips-and-tricks/optimize-your-build-times/">
      Optimize your build times
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Should I commit my dependencies into my repository?" href="../../tips-and-tricks/should-i-commit-my-dependencies-into-my-repository/">
      Should I commit my dependencies into my repository?
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Frequently Asked Questions (FAQ)</span>
    <ul>
      
        
  <li>
    <a class="" title="Available Environment Variables" href="../../faq/available-environment-variables/">
      Available Environment Variables
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to change the owner of an app" href="../../faq/how-to-change-the-owner-of-an-app/">
      How to change the owner of an app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Organization FAQ" href="../../faq/organization-faq/">
      Organization FAQ
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Adding projects with submodules or with private CocoaPods repos" href="../../faq/adding-projects-with-submodules/">
      Adding projects with submodules or with private CocoaPods repos
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Android x86 Emulator" href="../../faq/android-x86-emulator/">
      Android x86 Emulator
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="How to generate an SSH key pair" href="../../faq/how-to-generate-ssh-keypair/">
      How to generate an SSH key pair
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tools</span>
    <ul>
      
        
  <li>
    <a class="" title="Bitrise Tools" href="../../tools/bitrise-tools/">
      Bitrise Tools
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>

      <!-- Article -->
      <article class="article">
        <div class="wrapper">

          <!-- Headline -->
          
            <h1>Use your own Docker image</h1>
          

          <!-- Article content -->
          <p>There are two ways to use <code>docker</code> on <a href="https://www.bitrise.io">bitrise.io</a>:</p>
<ol>
<li>Run <code>docker</code> commands yourself, e.g. with a <code>Script</code> step</li>
<li>Use a Linux/Android stack and set the environment docker image for the app (<code>Settings</code> tab)</li>
</ol>
<p><strong>The first option is strongly preferred, you should not change the base environment docker image (on the <code>Settings</code> tab on bitrise.io)
unless you really have to!</strong> Running the <code>docker</code> commands yourself during the build is way more flexible,
and provides an overall better control.</p>
<h2 id="run-docker-commands-during-the-build">Run docker commands during the build<a class="headerlink" href="#run-docker-commands-during-the-build" title="Permanent link">⚓</a></h2>
<p><strong>This is the preferred way of using docker</strong>, both locally and on <a href="https://www.bitrise.io">bitrise.io</a>.</p>
<p>All you have to do is:</p>
<ol>
<li>Add a <code>Script</code> step to your workflow</li>
<li>And in the <code>Script</code> step run the <code>docker</code> (or <code>docker-compose</code>, etc.) command you want to</li>
<li>Additionally, if you want to run the build on <a href="https://www.bitrise.io">bitrise.io</a>, make sure that you select
   a Linux/Android stack for the app; those stacks have <code>docker</code> preinstalled and ready to use our of the box.</li>
</ol>
<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>
<h3 id="running-docker-hello-world">Running docker hello-world<a class="headerlink" href="#running-docker-hello-world" title="Permanent link">⚓</a></h3>
<p>Following the official "getting started" guide for example, to run the "hello world" docker image
your bitrise build configuration yml can be as simple as:</p>
<pre class="code"><code>---
format_version: 1.3.1
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
trigger_map:
- push_branch: &quot;*&quot;
  workflow: primary
- pull_request_source_branch: &quot;*&quot;
  workflow: primary
workflows:
  primary:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv &quot;SSH_RSA_PRIVATE_KEY&quot; | ne &quot;&quot;}}'
    - git-clone@3.4.1: {}
    - script@1.1.3:
        title: docker run hello-world
        inputs:
        - content: |-
            #!/bin/bash
            # fail if any commands fails
            set -e
            # debug log
            set -x

            docker run hello-world</code></pre>


<h3 id="build-and-run-a-dockerfile">Build and run a Dockerfile<a class="headerlink" href="#build-and-run-a-dockerfile" title="Permanent link">⚓</a></h3>
<p>A bit more complex example, using your own <code>Dockerfile</code> in your repository to define the docker environment:</p>
<pre class="code"><code>---
format_version: 1.3.1
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
trigger_map:
- push_branch: &quot;*&quot;
  workflow: primary
- pull_request_source_branch: &quot;*&quot;
  workflow: primary
workflows:
  primary:
    steps:
    - activate-ssh-key@3.1.1:
        run_if: '{{getenv &quot;SSH_RSA_PRIVATE_KEY&quot; | ne &quot;&quot;}}'
    - git-clone@3.4.1: {}
    - script@1.1.3:
        title: docker run
        inputs:
        - content: |-
            #!/bin/bash
            # fail if any commands fails
            set -e
            # debug log
            set -x

            docker build -t bitrise-minimal-sample .
            docker run --rm bitrise-minimal-sample</code></pre>


<p>This workflow will:</p>
<ol>
<li>Git Clone your repository</li>
<li>And then run <code>docker build -t bitrise-minimal-sample .</code> and <code>docker run --rm bitrise-minimal-sample</code> in the repository's root.</li>
</ol>
<p>If you have a <code>Dockerfile</code> like this in the root of the repository:</p>
<pre class="code"><code>FROM alpine:3.3

CMD cat /etc/alpine-release</code></pre>


<p>The output will be something like:</p>
<pre class="code"><code>+------------------------------------------------------------------------------+
| (2) docker run hello-world                                                   |
+------------------------------------------------------------------------------+
| id: script                                                                   |
| version: 1.1.3                                                               |
| collection: https://github.com/bitrise-io/bitrise-steplib.git                |
| toolkit: bash                                                                |
| time: 2016-11-21T14:28:23Z                                                   |
+------------------------------------------------------------------------------+
|                                                                              |
+ docker build -t bitrise-minimal-sample .
Sending build context to Docker daemon 69.12 kB

Step 1 : FROM alpine:3.3
3.3: Pulling from library/alpine
985c5f84712b: Pulling fs layer
985c5f84712b: Verifying Checksum
985c5f84712b: Download complete
985c5f84712b: Pull complete
Digest: sha256:ec40755933414575748cecf929f1f2012cace2d2e0f8147e77e652d600ff17d7
Status: Downloaded newer image for alpine:3.3
 ---&gt; 6c2aa2137d97
Step 2 : CMD cat /etc/alpine-release
 ---&gt; Running in 507cfb961cc7
 ---&gt; 02a0da3ac697
Removing intermediate container 507cfb961cc7
Successfully built 02a0da3ac697
+ docker run --rm bitrise-minimal-sample
3.3.3
|                                                                              |
+---+---------------------------------------------------------------+----------+
| ✓ | docker run hello-world                                        | 4.24 sec |
+---+---------------------------------------------------------------+----------+</code></pre>


<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>
<h3 id="using-docker-compose">Using docker-compose<a class="headerlink" href="#using-docker-compose" title="Permanent link">⚓</a></h3>
<p>The previous example could be even shorter using <a href="https://docs.docker.com/compose/">docker-compose</a>.</p>
<p>For example, if you have a <code>docker-compose.yml</code> like this in your repository root (where the <code>Dockerfile</code> is):</p>
<pre class="code"><code>version: '2'
services:
  sample-app:
    build: .</code></pre>


<p>You can replace the</p>
<pre class="code"><code>docker build -t bitrise-minimal-sample .
docker run --rm bitrise-minimal-sample</code></pre>


<p>lines with a single <code>docker-compose</code> call:</p>
<pre class="code"><code>docker-compose run --rm sample-app</code></pre>


<p>Docker compose will build and run the image automatically, you don't have to specify a <code>-t</code> tag - the <code>services</code>
name will be used by <code>docker-compose</code> to tag the image automatically.</p>
<p><em>You can find a sample repository on GitHub,
which is configure to run on your Mac/Linux using the <a href="https://www.bitrise.io/cli">Bitrise CLI</a>:
<a href="https://github.com/bitrise-samples/minimal-docker">https://github.com/bitrise-samples/minimal-docker</a></em></p>
<h2 id="using-bitriseio-custom-docker-image-option">Using bitrise.io custom docker image option<a class="headerlink" href="#using-bitriseio-custom-docker-image-option" title="Permanent link">⚓</a></h2>
<blockquote>
<p>Use a Linux/Android stack and set the environment docker image for the app (<code>Settings</code> tab)</p>
</blockquote>
<div class="admonition warning">
<p class="admonition-title">Custom Android docker image</p>
<p>Creating and maintaining your own Android Docker image can be quite time consuming!
<strong>If what you need is just to install a couple of additional tools, you should do that with e.g. a Script step instead!</strong>
For more information see the <a href="../../tips-and-tricks/install-additional-tools/">Install Any Additional Tool</a> guide.
<em>You should only use your own Android docker image if you really have to!</em></p>
</div>
<p>If you want to run your build in a custom docker environment,
<strong>you should base your own docker image on one of our base Docker images</strong>, as those have every base tool pre-installed,
the standard bitrise directories created, the Environments (like <code>$BITRISE_DEPLOY_DIR</code>) set,
and are pre-cached on the build virtual machines.
<strong>If you decide to create your own Docker image please read this guide, from start to finish!</strong></p>
<p><strong>Feel free to send Pull Request for our images if you think we missed something, which would be useful for everyone who uses our images!</strong></p>
<p>The bare-minimum base image can be found at:</p>
<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/docker-bitrise-base/">https://hub.docker.com/r/bitriseio/docker-bitrise-base/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/bitrise-base">https://github.com/bitrise-docker/bitrise-base</a></li>
</ul>
<p>Android base image, built on the bare-minimum base image, adding Android specific tools and Envs:</p>
<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/docker-android/">https://hub.docker.com/r/bitriseio/docker-android/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/android">https://github.com/bitrise-docker/android</a></li>
</ul>
<p>Android NDK image, built on the Android base image, adding a pre-installed Android NDK and Envs:</p>
<ul>
<li>Docker Hub: <a href="https://hub.docker.com/r/bitriseio/android-ndk/">https://hub.docker.com/r/bitriseio/android-ndk/</a></li>
<li>GitHub: <a href="https://github.com/bitrise-docker/android-ndk">https://github.com/bitrise-docker/android-ndk</a></li>
</ul>
<p>As you can see, if you want to base your own image on one of our available images you can do that by specifying
it at the very top of your <code>Dockerfile</code> with a <code>FROM bitriseio/IMAGE-ID:latest</code>,
for example: <code>FROM bitriseio/docker-bitrise-base:latest</code></p>
<div class="admonition warning">
<p class="admonition-title">Don't use the <code>-alpha</code> images for your builds</p>
<p>For every docker image we have on Docker Hub we have a <code>-alpha</code> post fixed version too.
the <code>-alpha</code> ones are rebuilt frequently and are <strong>not precached on <a href="https://www.bitrise.io">bitrise.io</a></strong>,
so you should avoid those. The only purpose of the <code>-alpha</code> images is to provide
ready to use test environments for us, before we would publish a non <code>-alpha</code> version.</p>
</div>
<p><strong>Important</strong>: you have to use the <strong>Docker Hub ID</strong> of the image you want to use as
the base image (ex: <code>bitriseio/docker-android</code>, <code>bitriseio/android-ndk</code> or <code>bitriseio/docker-bitrise-base</code>).</p>
<p>You can find an example project which extends our Android image by
installing additional SDKs at: <a href="https://github.com/viktorbenei/docker-bitrise-android-ext">https://github.com/viktorbenei/docker-bitrise-android-ext</a></p>
<h3 id="create-the-docker-image-to-be-able-to-use-it-on-bitriseio">Create the Docker Image, to be able to use it on bitrise.io<a class="headerlink" href="#create-the-docker-image-to-be-able-to-use-it-on-bitriseio" title="Permanent link">⚓</a></h3>
<p>You can create it any way you want to and push it into any Docker registry.
The only requirement is that it have to be a <strong>public</strong> image, private images are not (yet) supported.</p>
<p>We'll show a quick example with GitHub and Docker Hub, using Docker Hub's
automatic builds (it'll automatically create a new Docker image for you every time you change your Dockerfile on GitHub).</p>
<p>What you need for this guide:</p>
<ul>
<li><a href="https://github.com">GitHub account</a></li>
<li><a href="https://hub.docker.com">Docker Hub account</a></li>
</ul>
<p>First, you have to create a new repository on GitHub, and add at least a <code>Dockerfile</code>, with a <code>FROM bitriseio/IMAGE-ID:latest</code>
statement at the top of the <code>Dockerfile</code>, like the one you can see at:
<a href="https://github.com/viktorbenei/docker-bitrise-android-ext/blob/master/Dockerfile#L1">https://github.com/viktorbenei/docker-bitrise-android-ext/blob/master/Dockerfile#L1</a>
(<em>don't forget to commit &amp; push it!</em>).</p>
<div class="admonition note">
<p class="admonition-title">Which image to use? - Performance notes</p>
<p>If you don't need the Android tools you should base your image on the <code>bitrise-base</code> image
and install just the things you need. If you really need the Android tools then you should use
the <code>android</code> image, and you should only use the <code>android-ndk</code> image as the base image if you actually need the NDK.</p>
<p>From a performance perspective: you should install the least amount of tools in your image,
as it'll make your image smaller, which means faster download &amp; build start.</p>
</div>
<p>You now have the description of your image. Go to <a href="https://hub.docker.com">Docker Hub</a>, click <code>Create</code> in the top menu and select <code>Create Automated Build</code>.
If you haven't linked your GitHub account to your Docker Hub account you'll have to do it now.
Once the link between GitHub and Docker Hub is established you'll see a list of your GitHub repositories.
Select the repository you just created (the one with the <code>Dockerfile</code> in its root), and follow the guide.</p>
<p>Congratulation! You now have a fully automatic Docker image creation, based on your GitHub repository!
This means that every time you change the repository, commit &amp; push the change Docker Hub will pick up the new <code>Dockerfile</code> and will build a Docker image for you.</p>
<p><strong>One more thing you should do is to Link your image to our base image you use, so that every time our base image is updated your image will update as well.</strong></p>
<p><em>This is especially important if you base your Docker image on one of our Android images.
Those images are quite large, and if we have to do a change in the base Docker image and you don't build a new image,
<strong>your image will require the old base image, which won't be pre-cached</strong> on the build Virtual Machines anymore!
This means that to <code>docker pull</code> your image it won't be enough to download just the diffs anymore,
<strong>the whole image will have to be pulled</strong> which might even result in errors like "no space left on the device" -
to <code>docker pull</code> the base Android image, if no cache is available, it already requires ~10GB disk space, and the Android NDK image is even larger!</em></p>
<p><strong>Link your image to one of ours</strong>: you can do this on DockerHub, on the <code>Build Settings</code> tab,
under the <code>Repository Links</code> section. Just specify the ID of our Docker image (ex: <code>bitriseio/docker-android</code>),
save the link and the next time the specified image is updated your image will be re-built as well (using the <code>Dockerfile</code> in <strong>your</strong> repository).</p>
<h3 id="use-your-own-public-docker-image-for-your-builds">Use your own (public) Docker image for your builds<a class="headerlink" href="#use-your-own-public-docker-image-for-your-builds" title="Permanent link">⚓</a></h3>
<p>Once you have your own Docker image and you verified that it can be <code>docker pull</code>-ed,
you can set its ID on the <code>Settings</code> tab of your app on <a href="https://www.bitrise.io">bitrise.io</a>,
in the <code>Stack Selector</code> section.</p>
<p>You just have to copy paste the ID of your image (e.g. <code>bitriseio/docker-bitrise-base</code>)
into the <code>Docker image to use</code> field and click the <code>Save</code> button.
Your next build will use the image you specified.</p>

          <!-- Copyright and theme information -->
          <aside class="copyright" role="note">
            
            <hr />
            <p>
              <b><a href="https://github.com/bitrise-io/devcenter/blob/master/docs/docker/use-your-own-docker-image.md">Feel free to edit any page of this DevCenter on GitHub, in your browser directly!</a></b>
              <br />
              You can edit the pages on <a href="https://github.com/bitrise-io/devcenter/blob/master/docs/docker/use-your-own-docker-image.md">GitHub</a> directly, you don't have to git clone the repository.
              <br />
              Just select the file on <a href="https://github.com/bitrise-io/devcenter/blob/master/docs/docker/use-your-own-docker-image.md">GitHub</a> and click the <b>pencil/edit icon</b>,
              which will open the GitHub editor for the file.
              <br />
              If you don't want to edit the page on GitHub, feel free to <a href="https://www.bitrise.io/contact">contact us</a>, and we'll do the change for you!
            </p>
          </aside>

          <!-- Footer -->
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../run-your-build-locally-in-docker/" title="How to run your build locally in Docker">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                How to run your build locally in Docker
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../../xamarin/" title="About Xamarin">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                About Xamarin
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>

      <!-- Search results -->
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>

    <!-- Theme-related and custom javascripts -->
    <script>
      var base_url = '../..';
      var repo_id  = 'bitrise-io/devcenter';
    </script>
    <script src="../../assets/javascripts/application.js"></script>
    

    <!-- Google Analytics -->
    
  </body>
</html>