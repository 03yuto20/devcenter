<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Code Signing - Bitrise DevCenter</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Bitrise DevCenter">
    <meta property="og:image" content="None/../../img/logo.svg">
    <meta name="apple-mobile-web-app-title" content="Bitrise DevCenter">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../../img/logo.svg">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../../None">
    <link rel="icon" type="image/x-icon" href="../../None">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../../assets/fonts/icon.eot?52m981');
      	src: url('../../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../../assets/stylesheets/application-0dac3e5884.css">
    
      <link rel="stylesheet" href="../../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Source+Code+Pro">
      <style>
        body, input {
          font-family: 'Roboto', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script src="../../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-deep-purple palette-accent-deep-purple">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                iOS <i class="icon icon-link"></i>
              
            
          </span>
        
        Code Signing
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/bitrise-io/devcenter" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../../img/logo.svg">
        </div>
      
      <div class="name">
        <strong>
          Bitrise DevCenter
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          bitrise-io/devcenter
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/bitrise-io/devcenter/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/bitrise-io/devcenter/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Bitrise DevCenter" href="../..">
      Bitrise DevCenter
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Getting Started</span>
    <ul>
      
        
  <li>
    <a class="" title="What is Bitrise?" href="../../getting-started/">
      What is Bitrise?
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Builds & Workflows" href="../../getting-started/builds-and-workflows/">
      Builds & Workflows
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Infrastructure</span>
    <ul>
      
        
  <li>
    <a class="" title="Virtual Machines" href="../../infrastructure/virtual-machines/">
      Virtual Machines
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Available Stacks" href="../../infrastructure/available-stacks/">
      Available Stacks
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Signing up</span>
    <ul>
      
        
  <li>
    <a class="" title="Signing up with GitHub" href="../../signing-up/signing-up-with-github/">
      Signing up with GitHub
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with Bitbucket" href="../../signing-up/signing-up-with-bitbucket/">
      Signing up with Bitbucket
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Signing up with email" href="../../signing-up/signing-up-with-email/">
      Signing up with email
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Trial after signing up" href="../../signing-up/trial-after-signing-up/">
      Trial after signing up
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Adding a new app</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new app" href="../../adding-a-new-app/">
      Adding a new app
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Connecting a repository" href="../../adding-a-new-app/connecting-a-repository/">
      Connecting a repository
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up SSH keys" href="../../adding-a-new-app/setting-up-ssh-keys/">
      Setting up SSH keys
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Setting up configuration" href="../../adding-a-new-app/setting-up-configuration/">
      Setting up configuration
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Team management</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding a new team member" href="../../team-management/">
      Adding a new team member
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Changing the owner of an app" href="../../team-management/changing-the-owner-of-an-app/">
      Changing the owner of an app
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Webhooks</span>
    <ul>
      
        
  <li>
    <a class="" title="Adding webhooks" href="../../webhooks/">
      Adding webhooks
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Adding a GitHub webhook" href="../../webhooks/adding-a-github-webhook/">
      Adding a GitHub webhook
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Caching</span>
    <ul>
      
        
  <li>
    <a class="" title="About caching" href="../../caching/about-caching/">
      About caching
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Cocoapods" href="../../caching/caching-cocoapods/">
      Caching Cocoapods
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Gradle" href="../../caching/caching-gradle/">
      Caching Gradle
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Caching Ruby GEMs" href="../../caching/caching-ruby-gems/">
      Caching Ruby GEMs
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">iOS</span>
    <ul>
      
        
  <li>
    <a class="current" title="Code Signing" href="./">
      Code Signing
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="How iOS code signing works" href="#how-ios-code-signing-works">
                How iOS code signing works
              </a>
            </li>
          
            <li class="anchor">
              <a title="How to make the process easier, more manageable?" href="#how-to-make-the-process-easier-more-manageable">
                How to make the process easier, more manageable?
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <span class="section">Tips & Tricks</span>
    <ul>
      
        
  <li>
    <a class="" title="Attach any file as an Artifact to the Build" href="../../tips-and-tricks/attach-any-file-to-build/">
      Attach any file as an Artifact to the Build
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Expose an Environment Variable and use it in another Step" href="../../tips-and-tricks/expose-environment-variable/">
      Expose an Environment Variable and use it in another Step
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Don't mark the Build as failed if a given step would fail (ignore the error of the Step)" href="../../tips-and-tricks/dont-mark-build-failed-if-step-fails/">
      Don't mark the Build as failed if a given step would fail (ignore the error of the Step)
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Enable/Disable a step (optionally, based on a condition)" href="../../tips-and-tricks/disable-a-step-by-condition/">
      Enable/Disable a step (optionally, based on a condition)
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>Code Signing</h1>
          
          <h2 id="how-ios-code-signing-works">How iOS code signing works<a class="headerlink" href="#how-ios-code-signing-works" title="Permanent link">⚓</a></h2>
<p>iOS apps require code signing for every action/output which generates an app (<code>.ipa</code>) meant to
run on a physical iOS device.</p>
<p>When you create &amp; export an Archive (<code>.ipa</code>) of your app Xcode will sign it automatically,
based on the <strong>Code Signing</strong> settings you have in your Xcode project. There are, however,
a couple of things you have to know about how Xcode selects the code signing
files (unless you set a specific Identity and/or Provisioning Profile).</p>
<p>If you have a Code Signing configuration in your Xcode project like this one:</p>
<p><img alt="Recommended iOS Code Signing configuration in Xcode" src="../../img/recommended-ios-code-signing-settings.png" /></p>
<p>where you don't set a specific Identity and Provisioning Profile, Xcode will
select the ones which match the following points:</p>
<ul>
<li>For the <strong>Release</strong> configuration it'll search for a Distribution Identity/Certificate</li>
<li>For the <strong>Debug</strong> configuration it'll search for a Development Identity/Certificate</li>
<li>The Provisioning Profile has to match with the <strong>team ID</strong> and with the <strong>bundle ID</strong> you set
  in your Xcode project settings.</li>
</ul>
<p>This means that even if you have a Distribution Identity/Certificate available in the system,
if Xcode can't find a related Provisioning Profile which matches the <em>team ID</em> <strong>and</strong> the <em>bundle ID</em>
you'll get an error like this when you try to archive the project:</p>
<pre class="code"><code>Code Sign error: No code signing identities found: No valid signing identities (i.e. certificate and private key pair) matching the team ID ‘certificate_ID’ were found.</code></pre>


<p>This means that to be able to Archive your project you have to provide both a Certificate (<code>.p12</code> Identity file)
and a Provisioning Profile which matches:</p>
<ul>
<li>the type of the configuration you set in your Xcode project settings under the <strong>Code Signing</strong> section (Distribution or Development)</li>
<li>the Provisioning Profile has to match both the <em>bundle ID</em> <strong>and</strong> the <em>team ID</em> set in the Xcode project settings</li>
<li>and <strong>the two files have to be compatible with each other</strong> (you
can check this on the <a href="https://developer.apple.com/account/ios/certificate">Apple Developer Portal</a> - select a Provisioning Profile,
click <strong>Edit</strong>, there you can see the Certificates which are allowed to use that specific Provisioning Profile)</li>
</ul>
<p>There can be multiple Certificates/Identities and Provisioning Profiles installed on the system,
the only thing what matters for Xcode when it tries to sign the app is to find a Certificate/Identity and
Provisioning Profile pair which fulfills all the requirements listed above.</p>
<div class="admonition note">
<p class="admonition-title">How to export your iOS Code Signing files</p>
<p>If you need help with exporting your iOS Code Signing files, you can find
a step-by-step guide with screenshots <a href="https://bitrise.readme.io/docs/provprofile-cert-export">on our old DevCenter</a>.</p>
</div>
<h2 id="how-to-make-the-process-easier-more-manageable">How to make the process easier, more manageable?<a class="headerlink" href="#how-to-make-the-process-easier-more-manageable" title="Permanent link">⚓</a></h2>
<p>There's an important "trick" which can make your code signing process much easier:
Xcode (Xcode's Command Line Tool, <code>xcodebuild</code>) has a command line parameter to
override the Identity and Provisioning Profile configurations set in Xcode project settings!</p>
<p>The <code>CODE_SIGN_IDENTITY</code> parameter can be used to override the <strong>Code Signing Identity</strong>,
while the <code>PROVISIONING_PROFILE</code> parameter can be used to override the <strong>Provisioning Profile</strong> configuration
for any <code>xcodebuild</code> command (e.g. Archive).</p>
<p>Both our <code>Xcode Archive</code> and <code>Xcode Analyze</code> steps include two related inputs,
<code>Force code signing with Identity</code> and <code>Force code signing with Provisioning Profile</code>.
The value you provide for these inputs will be passed to <code>xcodebuild</code>
as <code>CODE_SIGN_IDENTITY</code> and <code>PROVISIONING_PROFILE</code>.</p>
<p><strong>Now, the important bit, that can make your life much easier</strong> (especially if you generate an iOS app with
multiple, different code signing configuration (e.g. if you want to generate both an Ad-Hoc and
an App Store signed <code>ipa</code>)):</p>
<div class="admonition note">
<p class="admonition-title">Setting a specific Identity will make Xcode ignore other search parameters!</p>
<p>If you set the Identity to <code>iPhone Distribution</code> Xcode will search for a matching Provisioning
Profile which fulfills all the other criteria (team ID and bundle ID),
while <strong>if you provide the full ID of the Identity</strong> like <code>iPhone Distribution: My Company</code>
Xcode will <strong>ignore</strong> everything else and will use that specific Identity (if it can
find it in the system)!</p>
</div>
<p>This means that even if the Provisioning Profile has a different <em>team ID</em> set, just by
specifying the Identity's full ID, Xcode will pick the Provisioning Profile
which is compatible with the Identity, it won't check the <em>team ID</em> parameter!</p>
<p>This makes iOS code signing (in most cases) much easier, as all you have to do is:</p>
<ul>
<li>Make sure that you set the Provisioning Profile configuration <em>in your Xcode project settings</em> to "Automatic",
  or else you'll have to override this configuration too (to be able to use different Provisioning Profiles)</li>
<li>You should set the Identity configuration <em>in your Xcode project settings</em> to a generic category like
  "iPhone Developer" or "iPhone Distribution" (this is more like a best practice, to make the life of
  developers easier, <em>not a requirement if you override the configuration</em>)</li>
<li><strong>And the last piece is</strong>: set the <code>Force code signing with Identity</code> input of Xcode Archive and
  Xcode Analyze to the <strong>full ID of the Identity</strong> (something like: <code>iPhone Distribution: My Company</code>)</li>
</ul>
<p><strong>With this setup you don't have to change your code signing configuration in your Xcode project</strong>,
you only have to specify the configuration in your Bitrise workflow, and you can specify
different code signing configuration for every Xcode step if you want to!</p>
<div class="admonition note">
<p class="admonition-title">Where to get these IDs?</p>
<p>If you use our <strong>Certificate and profile installer</strong> step then you can find the IDs in the step's
log. It prints the ID of every identity and provisioning profile it downloads
and installs successfully. You can copy-paste that ID directly into the
<strong><em>Force code signing with Identity</em></strong> (ID looks like: <code>iPhone Distribution: My Company (Xyz)</code>),
and if you need it, into the <strong><em>Force code signing with Provisioning Profile</em></strong>
(ID looks like: <code>xyz045x4-6143-4e5a-a94a-3fe3aec96eb3</code>) input fields.</p>
</div>
<p><strong>Usually it's enough to specify only the Identity ID</strong> for the build, the compatible Provisioning Profile
will be selected by Xcode automatically. Not setting the Provisioning Profile has the advantage
that if you have to update the Provisioning Profile you won't have to update your
Bitrise configuration with the new profile's ID, as long as the Provisioning Profile is
compatible with the Identity you set. But if you'd need to control exactly
which Provisioning Profile should be used for a given step, you can use
the <code>Force code signing with Provisioning Profile</code> input of the steps.
<em>This can be useful if you want to use multiple Distribution Provisioning Profiles
in a single build, <strong>e.g. to create both an Ad-Hoc and an App Store signed app.</strong></em> </p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../../caching/caching-ruby-gems/" title="Caching Ruby GEMs">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Caching Ruby GEMs
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../../tips-and-tricks/attach-any-file-to-build/" title="Attach any file as an Artifact to the Build">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Attach any file as an Artifact to the Build
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '../..';
      var repo_id  = 'bitrise-io/devcenter';
    </script>
    <script src="../../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>